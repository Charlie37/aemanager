{% extends "base.html" %}
{% load i18n %}

{% block extrahead %}
<script src="{% load adminmedia %}{% admin_media_prefix %}js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('#id_contract-contract_model').change(function(){
        var contract_id = jQuery('#id_contract-contract_model option:selected').val();
        jQuery.getJSON('{% url contract_get_content %}', {'id': contract_id}, function(data){
            jQuery('#id_contract-title').val(data['title']);
            jQuery('#id_contract-content').html(data['content']);
        });
    });
});
</script>
{% endblock %}


{% block content %}
<form action="" method="post" id="contract-edit-form">
    {% csrf_token %}
    <fieldset class="module aligned">
    {% for hidden in contractForm.hidden_fields %}
        {{ hidden }}
    {% endfor %}
    {% with contractForm.contract_model as field %}
    {% include "field.html" %}
    {% endwith %}
    {% with contractForm.title as field %}
    {% include "field.html" %}
    {% endwith %}
    <div class="big-textarea">
    {% with contractForm.content as field %}
    <div class="form-row">
    {{ field.errors }}
      <div><label for="{{ field.auto_id }}"{% if field.field.required %} class="required"{% endif %}>{{ field.label }}{% if field.field.required %}*{% endif %} :</label> {{ field }}
      {% if field.field.help_text %}
        <p class="help">{{ field.field.help_text|safe }}</p>
        <p class="help">{% trans "Keywords you can use" %} : {{ substitution_keys }}</p>
      {% endif %}
      </div>
    </div>
    {% endwith %}
    </div>
    </fieldset>

    <div class="submit-row">
    <input class="default" type="submit" name="action" value="{% trans "Save" %}" />
    </div>
</form>
{% endblock %}